---
id: 3800
title: Android 获取屏幕大小寸数(含smartbar)
date: 2016-01-09T23:02:48+00:00
author: 刘长炯
layout: post
guid: http://www.beansoft.biz/?p=3800
permalink: '/2016/01/09/android-%e8%8e%b7%e5%8f%96%e5%b1%8f%e5%b9%95%e5%a4%a7%e5%b0%8f%e5%af%b8%e6%95%b0%e5%90%absmartbar/'
views:
  - "1375"
categories:
  - Android
tags:
  - Android
  - Screen
---
<pre style="font-family: 'Microsoft YaHei'; font-size: 10.5pt;">@author 刘长炯 2016.01.09</pre>

<pre style="font-family: 'Microsoft YaHei'; font-size: 10.5pt;">Code License: Apache</pre>

<pre style="font-family: 'Microsoft YaHei'; font-size: 10.5pt;">You might also want read this: http://wiki.jikexueyuan.com/project/android-actual-combat-skills/acquring-screen-physical-size-density-and-resolution.html</pre>

<pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Microsoft YaHei'; font-size: 10.5pt;"><span style="color: #629755; font-style: italic;">/**<br /></span><span style="color: #629755; font-style: italic;"> * 获取屏幕对角大小的寸数.<br /></span><span style="color: #629755; font-style: italic;"> *<br /></span><span style="color: #629755; font-style: italic;"> * </span><span style="color: #629755; font-weight: bold; font-style: italic;">@param </span><span style="color: #8a653b; font-style: italic;">ctx </span><span style="color: #629755; font-style: italic;">Context<br /></span><span style="color: #629755; font-style: italic;"> * </span><span style="color: #629755; font-weight: bold; font-style: italic;">@return </span><span style="color: #629755; font-style: italic;">屏幕对角寸数<br /></span><span style="color: #629755; font-style: italic;"> */<br /></span><span style="color: #cc7832;">public static double </span><span style="color: #ffc66d;">getScreenInchSize</span>(Context ctx) {<br />        WindowManager windowManager = (WindowManager)<br />                ctx.getSystemService(Context.<span style="color: #9876aa; font-style: italic;">WINDOW_SERVICE</span>)<span style="color: #cc7832;">;<br /></span><span style="color: #cc7832;"> if </span>(windowManager != <span style="color: #cc7832;">null</span>) {<br />            Point point = <span style="color: #cc7832;">new </span>Point()<span style="color: #cc7832;">;<br /></span><span style="color: #808080;">// activity.getWindowManager().getDefaultDisplay().getRealSize(point);<br /></span><span style="font-style: italic;">getRealScreenSize</span>(ctx<span style="color: #cc7832;">, </span>point)<span style="color: #cc7832;">;<br /></span>DisplayMetrics dm = ctx.getResources().getDisplayMetrics()<span style="color: #cc7832;">;<br /></span><span style="color: #cc7832;"> double </span>x = Math.<span style="font-style: italic;">pow</span>(point.<span style="color: #9876aa;">x </span>/ dm.<span style="color: #9876aa;">xdpi</span><span style="color: #cc7832;">, </span><span style="color: #6897bb;">2</span>)<span style="color: #cc7832;">;<br /></span><span style="color: #cc7832;"> double </span>y = Math.<span style="font-style: italic;">pow</span>(point.<span style="color: #9876aa;">y </span>/ dm.<span style="color: #9876aa;">ydpi</span><span style="color: #cc7832;">, </span><span style="color: #6897bb;">2</span>)<span style="color: #cc7832;">;<br /></span><span style="color: #cc7832;"> double </span>screenInches = Math.<span style="font-style: italic;">sqrt</span>(x + y)<span style="color: #cc7832;">;<br /></span><span style="color: #cc7832;"> return </span>screenInches<span style="color: #cc7832;">;<br /></span>}<br /><br />        <span style="color: #cc7832;">return </span><span style="color: #6897bb;"></span><span style="color: #cc7832;">;<br /></span>}<br /><br />    <span style="color: #629755; font-style: italic;">/**<br /></span><span style="color: #629755; font-style: italic;"> * 获取屏幕真正大小, 包含smartbar等.<br /></span><span style="color: #629755; font-style: italic;"> * Ref: http://stackoverflow.com/questions/13628389/android-how-to-get-the-real-screen-size-of-the-device<br /></span><span style="color: #629755; font-style: italic;"> *<br /></span><span style="color: #629755; font-style: italic;"> * </span><span style="color: #629755; font-weight: bold; font-style: italic;">@param </span><span style="color: #8a653b; font-style: italic;">context<br /></span><span style="color: #629755; font-style: italic;">* </span><span style="color: #629755; font-weight: bold; font-style: italic;">@param </span><span style="color: #8a653b; font-style: italic;">point<br /></span><span style="color: #629755; font-style: italic;">*/<br /></span><span style="color: #cc7832;">public static void </span><span style="color: #ffc66d;">getRealScreenSize</span>(Context context<span style="color: #cc7832;">, </span>Point point) {<br />        WindowManager windowManager = (WindowManager)<br />                context.getSystemService(Context.<span style="color: #9876aa; font-style: italic;">WINDOW_SERVICE</span>)<span style="color: #cc7832;">;<br /></span><span style="color: #cc7832;"> if </span>(windowManager != <span style="color: #cc7832;">null</span>) {<br />            Display d = windowManager.getDefaultDisplay()<span style="color: #cc7832;">;<br /></span>DisplayMetrics metrics = <span style="color: #cc7832;">new </span>DisplayMetrics()<span style="color: #cc7832;">;<br /></span>d.getMetrics(metrics)<span style="color: #cc7832;">;<br /></span><span style="color: #808080;">// since SDK_INT = 1;<br /></span><span style="color: #cc7832;">int </span>widthPixels = metrics.<span style="color: #9876aa;">widthPixels</span><span style="color: #cc7832;">;<br /></span><span style="color: #cc7832;"> int </span>heightPixels = metrics.<span style="color: #9876aa;">heightPixels</span><span style="color: #cc7832;">;<br /></span><span style="color: #808080;">// includes window decorations (statusbar bar/menu bar)<br /></span><span style="color: #cc7832;">if </span>(Build.VERSION.<span style="color: #9876aa; font-style: italic;">SDK_INT </span>&gt;= <span style="color: #6897bb;">14 </span>&& Build.VERSION.<span style="color: #9876aa; font-style: italic;">SDK_INT </span>&lt; <span style="color: #6897bb;">17</span>) {<br />                <span style="color: #cc7832;">try </span>{<br />                    widthPixels = (Integer) Display.<span style="color: #cc7832;">class</span>.getMethod(<span style="color: #6a8759;">"getRawWidth"</span>).invoke(d)<span style="color: #cc7832;">;<br /></span>heightPixels = (Integer) Display.<span style="color: #cc7832;">class</span>.getMethod(<span style="color: #6a8759;">"getRawHeight"</span>).invoke(d)<span style="color: #cc7832;">;<br /></span>} <span style="color: #cc7832;">catch </span>(Exception ignored) {<br />                }<br />            }<br /><span style="color: #808080;">// includes window decorations (statusbar bar/menu bar)<br /></span><span style="color: #cc7832;">if </span>(Build.VERSION.<span style="color: #9876aa; font-style: italic;">SDK_INT </span>&gt;= <span style="color: #6897bb;">17</span>) {<br />                <span style="color: #cc7832;">try </span>{<br />                    Point realSize = <span style="color: #cc7832;">new </span>Point()<span style="color: #cc7832;">;<br /></span>Display.<span style="color: #cc7832;">class</span>.getMethod(<span style="color: #6a8759;">"getRealSize"</span><span style="color: #cc7832;">, </span>Point.<span style="color: #cc7832;">class</span>).invoke(d<span style="color: #cc7832;">, </span>realSize)<span style="color: #cc7832;">;<br /></span>widthPixels = realSize.<span style="color: #9876aa;">x</span><span style="color: #cc7832;">;<br /></span>heightPixels = realSize.<span style="color: #9876aa;">y</span><span style="color: #cc7832;">;<br /></span>} <span style="color: #cc7832;">catch </span>(Exception ignored) {<br />                }<br />            }<br /><br />            point.<span style="color: #9876aa;">x </span>= widthPixels<span style="color: #cc7832;">;<br /></span>point.<span style="color: #9876aa;">y </span>= heightPixels<span style="color: #cc7832;">;<br /></span>}<br />    }</pre>

转载请注明：[WebLogic Android 博客](http://www.beansoft.biz) &raquo; [Android 获取屏幕大小寸数(含smartbar)](http://www.beansoft.biz/2016/01/09/android-%e8%8e%b7%e5%8f%96%e5%b1%8f%e5%b9%95%e5%a4%a7%e5%b0%8f%e5%af%b8%e6%95%b0%e5%90%absmartbar/)