---
id: 2633
title: 转载－weblogic 类加载机制
date: 2011-12-07T19:03:37+00:00
author: 刘长炯
layout: post
guid: http://www.beansoft.biz/?p=2633
permalink: '/2011/12/07/%e8%bd%ac%e8%bd%bd%ef%bc%8dweblogic-%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6/'
views:
  - "3506"
original_post_id:
  - "2633"
image: /wp-content/uploads/2012/04/WebLogic.png
categories:
  - WebLogic
tags:
  - ClassLoader
  - WebLogic
---
来源：[weblogic 类加载机制日积月累，慢慢消化](http://blog.chinaunix.net/) 作者：**夏德虎**

&#160;

&#160;

   <span class="Apple-style-span" style="word-spacing:0;font:12px/15px 宋体, arial;text-transform:none;color:rgb(0,0,0);text-indent:0;white-space:normal;letter-spacing:normal;background-color:rgb(255,252,243);orphans:2;widows:2;"></p> 

<p style="font-size:14px;line-height:1.5;margin:0;padding:5px 0 0;">
  文章引用1:classloader机制概述，引用自:<a style="color:rgb(99,64,27);text-decoration:none;" href="http://blog.chinaunix.net/link.php?url=http://topic.csdn.net%2Ft%2F20030403%2F12%2F1613437.html" target="_blank">CSDN</a>
</p>

<div style="line-height:1.5;margin:0;padding:0;">
</div>

<table style="border-collapse:collapse;" cellspacing="0" cellpadding="0" width="95%" bgcolor="#f1f1f1" border="1">
  <tr>
    <td style="line-height:1.5;">
      <p style="font-size:14px;line-height:21px;margin:5px;padding:5px 0 0;">
        <code>&lt;span style="color:rgb(0,0,0);line-height:1.5;">JVM在运行时会产生三个ClassLoader，Bootstrap ClassLoader、Extension ClassLoader和AppClassLoader&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>其中，Bootstrap是用C&lt;span style="color:rgb(0,0,204);line-height:1.5;">+&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">+&lt;/span>编写的，我们在Java中看不到它，是null。它用来加载核心类库，在JVM源代码中这样写道：&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,255);line-height:1.5;">static&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">const&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">char&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>classpathFormat&lt;span style="color:rgb(0,0,204);line-height:1.5;">[&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">]&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,255);line-height:1.5;">"%/lib/rt.jar: "&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,255);line-height:1.5;">"%/lib/i18n.jar: "&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,255);line-height:1.5;">"%/lib/sunrsasign.jar: "&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,255);line-height:1.5;">"%/lib/jsse.jar: "&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,255);line-height:1.5;">"%/lib/jce.jar: "&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,255);line-height:1.5;">"%/lib/charsets.jar: "&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,255);line-height:1.5;">"%/classes "&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">;&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />知道为什么不需要在classpath中加载这些类了吧？人家在JVM启动的时候就自动加载了，并且在运行过程中根本不能修改Bootstrap加载路径。&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />Extension ClassLoader用来加载扩展类，即&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>lib&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>ext中的类。&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />最后AppClassLoader才是加载Classpath的。&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />ClassLoader加载类用的是委托模型。即先让Parent类&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>而不是Super，不是继承关系&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>寻找，Parent找不到才自己找。看来ClassLoader还是蛮孝顺的。三者的关系为&lt;span style="color:rgb(0,0,204);line-height:1.5;">:&lt;/span>AppClassLoader的Parent是ExtClassLoader，而ExtClassLoader的Parent为Bootstrap ClassLoader。加载一个类时，首先BootStrap先进行寻找，找不到再由ExtClassLoader寻找，最后才是AppClassLoader。&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />为什么要设计的这么复杂呢？其中一个重要原因就是安全性。比如在Applet中，如果编写了一个java&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">lang&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>String类并具有破坏性。假如不采用这种委托机制，就会将这个具有破坏性的String加载到了用户机器上，导致破坏用户安全。但采用这种委托机制则不会出现这种情况。因为要加载java&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">lang&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>String类时，系统最终会由Bootstrap进行加载，这个具有破坏性的String永远没有机会加载。&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />我们来看这段代码：&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,153,0);line-height:1.5;">//A.java&lt;span class="Apple-converted-space">&#160;&lt;/span>                    &lt;br />&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,255);line-height:1.5;">public&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">class&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>A&lt;span style="color:rgb(0,0,204);line-height:1.5;">{&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,255);line-height:1.5;">public&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">static&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">void&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>main&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">String&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">[&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">]&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>args&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">{&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />A a&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">new&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>A&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">;&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,0);line-height:1.5;">System&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>out&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">println&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">System&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">getProperty&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,255);line-height:1.5;">"java.ext.dirs "&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">;&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,0);line-height:1.5;">System&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>out&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">println&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>a&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">getClass&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">getClassLoader&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">;&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />B b&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">new&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>B&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">;&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />b&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">print&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">;&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,204);line-height:1.5;">}&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,204);line-height:1.5;">}&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,153,0);line-height:1.5;">//B.java&lt;span class="Apple-converted-space">&#160;&lt;/span>                    &lt;br />&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,255);line-height:1.5;">public&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">class&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>B&lt;span style="color:rgb(0,0,204);line-height:1.5;">{&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,255);line-height:1.5;">public&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">void&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">print&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">{&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,0);line-height:1.5;">System&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>out&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">println&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,255);line-height:1.5;">this&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">getClass&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">getClassLoader&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">;&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,204);line-height:1.5;">}&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,204);line-height:1.5;">}&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />1、我们将它放在Classpath中，则打印出&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />sun&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>misc&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>Launcher$AppClassLoader@92e78c&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />sun&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>misc&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>Launcher$AppClassLoader@92e78c&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />可见都是由AppClassLoader来加载的。&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />2、我们将其放在&lt;span style="color:rgb(0,0,204);line-height:1.5;">%&lt;/span>jre&lt;span style="color:rgb(0,0,204);line-height:1.5;">%&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>lib&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">ext&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>classes&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>即ExtClassLoader的加载目录。其加载&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>lib&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>ext中的jar文件或者子目录classes中的class文件&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>中。则会打印出：&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />sun&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>misc&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>Launcher$ExtClassLoader&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />sun&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>misc&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>Launcher$ExtClassLoader&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />3、我们将A&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>class放到&lt;span style="color:rgb(0,0,204);line-height:1.5;">%&lt;/span>jre&lt;span style="color:rgb(0,0,204);line-height:1.5;">%&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>lib&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">ext&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>classes中，而将B&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>class放到classpaht中又会怎么样呢？结果是：&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />sun&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>misc&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>Launcher$ExtClassLoader&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&lt;span style="color:rgb(255,0,0);line-height:1.5;">Exception&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">in&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">thread&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,255);line-height:1.5;">"main "&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">java&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">lang&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">NoClassDefFoundError&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">:&lt;/span>B&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />at A&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>main&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>A&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">java&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">:&lt;/span>6&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />怎么会这样呢？这其中有一个重要的问题：A类当然是由ExtClassLoader来加载的，B类要由哪个加载呢？B类要由调用它自己的类的类加载器&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>真拗口&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>。也就是说，A调用了B，所以B由A的类加载器ExtClassLoader来加载。ExtClassLoader根据委托机制，先拜托Bootstrap加载，Bootstrap没有找到。然后它再自己寻找B类，还是没找到，所以抛出异常。ExtClassLoader不会请求AppClassLoader来加载!你可能会想：这算什么问题，我把两个类放到一起不就行了？&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />呵呵，没这么简单。比如JDBC是核心类库，而各个数据库的JDBC驱动则是扩展类库或在classpath中定义的。所以JDBC由Bootstrap ClassLoader加载，而驱动要由AppClassLoader加载。等等，问题来了，Bootstrap不会请求AppClassLoader加载类啊。那么，他们怎么实现的呢？我就涉及到一个Context ClassLoader的问题，调用Thread&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>getContextClassLoader。具体我还没搞太明白，要知后事如何，请听下回分解！&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>啊！别拿砖&lt;/span></code>
      </p>
    </td>
  </tr>
</table>

<p style="font-size:14px;line-height:1.5;margin:0;padding:5px 0 0;">
  文章引用2:<span class="Apple-converted-space">&#160;</span><a style="color:rgb(99,64,27);text-decoration:none;" href="http://blog.chinaunix.net/link.php?url=http://cache.baidu.com%2Fc%3Fm%3D9d78d513d98616ff06b0c1255c01d717480ad3227dc0d1652189c01ec4244f060738ece161645213d2b6617a44ea0c4bea877325675d7de2c099dc1981fa852858d470726d58dd16579543ef9c1573d620e718b3ed0ee6ceb669c5b9d3a5df5e52%26amp%3Bp%3D8e678416d9c306e608e297744f41%26amp%3Buser%3Dbaidu" target="_blank">weblogic的classloader装载策略及部署应用的目录结构</a>
</p>

<div style="line-height:1.5;margin:0;padding:0;">
</div>

<table style="border-collapse:collapse;" cellspacing="0" cellpadding="0" width="95%" bgcolor="#f1f1f1" border="1">
  <tr>
    <td style="line-height:1.5;">
      <p style="font-size:14px;line-height:21px;margin:5px;padding:5px 0 0;">
        <code>&lt;span style="color:rgb(0,0,0);line-height:1.5;">weblogic的classloader装载策略及部署应用的目录结构1 目录结构                 &lt;br />在weblogic上要发布一个web applicate必须有下面的目录结构：                  &lt;br />mywebapp                  &lt;br />&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>____WEB&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF                  &lt;br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___lib&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,153,0);line-height:1.5;">//放这个web application所需要的jar包                   &lt;br />&lt;/span>                  &lt;br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___classes&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,153,0);line-height:1.5;">//放class类                   &lt;br />&lt;/span>                  &lt;br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___web&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">xml&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,153,0);line-height:1.5;">//对这个web application描述                   &lt;br />&lt;/span>                  &lt;/p>
&lt;p>发布一个application需要有下面的目录结构：                  &lt;br />myapplication                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___APP&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,153,0);line-height:1.5;">//放在这个目录下的lib和classes不能实例化webapp下的类                   &lt;br />&lt;/span>                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___lib&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,153,0);line-height:1.5;">//放ejb和webapp公用的jar包&lt;span class="Apple-converted-space">&#160;&lt;/span>                    &lt;br />&lt;/span>                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___classes&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,153,0);line-height:1.5;">//放ejb和webapp公用的类                   &lt;br />&lt;/span>                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___META&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>__application&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">xml&lt;/span>                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___mywebapp                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>____WEB&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___lib&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___classes&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,153,0);line-height:1.5;">//放class类                   &lt;br />&lt;/span>                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___web&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">xml&lt;/span>                  &lt;br />&#160;&#160; &lt;span style="color:rgb(0,0,204);line-height:1.5;">|&lt;/span>___ejb&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">jar&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,153,0);line-height:1.5;">//ejb的jar包                   &lt;br />&lt;/span>                  &lt;br />&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">=&lt;/span>                  &lt;/p>
&lt;p>2&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">classloader&lt;/span>                  &lt;br />classloader是分层次的，它只能加载比它层次高的类及它自身的类，同层次的类及比它层次低的类都不能加载。在weblogic中的classloader有5个层次，从高到低排：                  &lt;br />a&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>jdk                  &lt;br />b&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>jdk&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">ext&lt;/span>                  &lt;br />c&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">system&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>classpath                  &lt;br />d&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>APP&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>lib&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">and&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>APP&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>classes&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>                  &lt;br />e&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(0,0,204);line-height:1.5;">(&lt;/span>WEB&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>lib&lt;span class="Apple-converted-space">&#160;&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">and&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>WEB&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>classes&lt;span style="color:rgb(0,0,204);line-height:1.5;">)&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>                  &lt;br />f&lt;span style="color:rgb(0,0,204);line-height:1.5;">.&lt;/span>&lt;span class="Apple-converted-space">&#160;&lt;/span>ejb&lt;span>.&lt;/span>&lt;span style="color:rgb(255,0,0);line-height:1.5;">jar&lt;/span>                  &lt;br />注意：e 和 f 的classloader是同级的。                  &lt;br />所以APP&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>lib和APP&lt;span style="color:rgb(0,0,204);line-height:1.5;">-&lt;/span>INF&lt;span style="color:rgb(0,0,204);line-height:1.5;">/&lt;/span>classes下类不能实例化webapp下的类，这点尤其要注意，否则会报类找不到的错误。&lt;/span></code>
      </p>
    </td>
  </tr>
</table>

<p>
</p>

<div style="line-height:1.5;margin:0;padding:0;">
  文章应用3:<span class="Apple-converted-space">&#160;</span><a style="color:rgb(99,64,27);text-decoration:none;" href="http://blog.chinaunix.net/link.php?url=http://wenku.baidu.com%2Fview%2F6b1b65160b4e767f5acfce52.html" target="_blank">weblogic classloader加载机制官方文档中文翻译</a>
</div>

<div style="line-height:1.5;margin:0;padding:0;">
  &#160;
</div>

<div style="line-height:1.5;margin:0;padding:0;">
  <table style="border-collapse:collapse;" cellspacing="0" cellpadding="0" width="360" align="center" border="1">
    <tr>
      <td style="line-height:1.5;" align="center" width="60">
        <img style="max-width:650px;border-width:0;" alt="" src="http://control.cublog.cn/fileicon/rar.gif" border="0" />
      </td>
      
      <td style="line-height:1.5;">
        <table style="border-collapse:collapse;" cellspacing="0" cellpadding="0" width="100%" border="0">
          <tr>
            <td style="line-height:1.5;" align="center" width="40">
              文件:
            </td>
            
            <td style="line-height:1.5;">
              WebLogic类加载过程简述.rar
            </td>
          </tr>
          
          <tr>
            <td style="line-height:1.5;" align="center" width="40">
              大小:
            </td>
            
            <td style="line-height:1.5;">
              177KB
            </td>
          </tr>
          
          <tr>
            <td style="line-height:1.5;" align="center" width="40">
              下载:
            </td>
            
            <td style="line-height:1.5;">
              <a style="color:rgb(99,64,27);text-decoration:none;" href="http://blog.chinaunix.net/link.php?url=http://blogimg.chinaunix.net%2Fblog%2Fupfile2%2F100803232617.rar">下载</a>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</div>

<div style="line-height:1.5;margin:0;padding:0;">
</div>

<p>
  </span> <br class="Apple-interchange-newline" />
</p>

<p>
  转载请注明：<a href="http://www.beansoft.biz">WebLogic Android 博客</a> &raquo; <a href="http://www.beansoft.biz/2011/12/07/%e8%bd%ac%e8%bd%bd%ef%bc%8dweblogic-%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6/">转载－weblogic 类加载机制</a>
</p>